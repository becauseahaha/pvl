{"version":3,"file":"main.js","sources":["../../src/js/main.js"],"sourcesContent":["function hidePopup(id) {\n\n    let popup = document.getElementById(id) ? document.getElementById(id) : this.closest('.popup');\n\n    if (popup.dataset.processing && popup.dataset.processing == true) return;\n    popup.dataset.processing = true;\n\n    if (popup.classList.contains('is-shown')) {\n        popup.addEventListener('transitionend', (e) => {\n            popup.style.display = 'none';\n            popup.dataset.processing = false;\n        }, {\n            once: true\n        })\n        popup.classList.remove('is-shown');\n    } \n\n}\n\nfunction showPopup(id) {\n\n    let popup = document.getElementById(id);\n\n    if (popup.dataset.processing && popup.dataset.processing == true) return;\n    popup.dataset.processing = true;\n\n    if (popup.classList.contains('is-shown') == false) {\n        popup.style.display = 'flex';\n        setTimeout(function() {\n            popup.classList.add('is-shown')\n            popup.dataset.processing = false;\n        }, 1)\n    }\n}\n\nconst headerButton = () => {\n\n    const $header = document.getElementById('header')\n    const $backdrop = document.getElementById('header-backdrop')\n    const $button = document.getElementById('header-button')\n\n    $button.addEventListener('click', () => {\n        if ($header.dataset.processing && $header.dataset.processing == true) return;\n        $header.dataset.processing = true;\n        if ($header.classList.contains('is-fixed') == false) {\n            $backdrop.style.display = 'block';\n            setTimeout(function() {\n                $backdrop.classList.add('is-active')\n                $header.dataset.processing = false;\n            }, 1)\n        } else {\n            $backdrop.addEventListener('transitionend', (e) => {\n                $backdrop.style.display = 'none';\n                $header.dataset.processing = false;\n            }, {\n                once: true\n            })\n            $backdrop.classList.remove('is-active')\n        }\n        $header.classList.toggle('is-fixed')\n    })\n}\n\nconst footer = () => {\n\n    const $footer = document.getElementById('footer');\n    const height = $footer.scrollHeight;\n\n    document.body.style.paddingBottom = height + 'px';\n\n}\n\nconst projectsBorder = () => {\n\n    const $projects = document.getElementById('projects');\n    if (!$projects) return;\n\n    const i = $projects.querySelectorAll('.project').length;\n    let perLine = 4;\n    \n    switch (true) {\n        case (window.innerWidth < 767):\n            perLine = 1;\n            break;\n        case (window.innerWidth < 1280):\n            perLine = 2;\n            break;\n    }\n\n    for (let k = 1; k <= Math.ceil(i/perLine); k++) {\n        const $line = document.createElement('div');\n        $line.className = 'project__line';\n        const startRow = k*2;\n        const endtRow  = startRow + 1;\n        $line.style.gridRow = startRow + '/' + endtRow;\n        $projects.appendChild($line);\n    }\n\n}\n\nconst yandexMap = () => {\n    const pin = {\n        iconLayout: 'default#image',\n        iconImageHref: './images/map-pin.png',\n        iconImageSize: [38, 38],\n        iconImageOffset: [-19,-19]\n    }\n    let myMap = new ymaps.Map(\"map\", {\n        center: [59.933023, 30.304603],\n        zoom: 16\n    });\n    let myPlacemark = new ymaps.Placemark(myMap.getCenter(), {}, pin)\n    myMap.geoObjects.add(myPlacemark);\n}\n\nconst mapScroll = () => {\n\n    return;\n\n    const $map = document.getElementById('map-scroll');\n\n    function onScroll(e) {\n        console.log(e)\n    }\n\n    const observer = new IntersectionObserver(function(e) {\n        if (e[0].isIntersecting) {\n            document.addEventListener('scroll', onScroll)\n        } else {\n            // document.removeEventListener('scroll', onScroll)\n        }\n    })\n    observer.observe($map)\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    headerButton();\n    projectsBorder();\n    mapScroll();\n\n    footer();\n    // window.addEventListener('resize', footer)\n\n    document.querySelectorAll('.js-popup-hide').forEach((el) => {\n        el.addEventListener('click', hidePopup.bind(el));\n    })\n\n    document.querySelectorAll('.popup').forEach((el) => {\n        el.addEventListener('click', function(e) {\n            if (e.target == el) {\n                hidePopup(e.target.id)\n            }\n        });\n    })\n\n    document.querySelectorAll('.js-popup-show').forEach((el) => {\n        el.addEventListener('click', (e) => {\n            e.preventDefault();\n            showPopup(el.dataset.target, el.dataset);\n        })\n    })\n\n})"],"names":["hidePopup","id","popup","document","getElementById","this","closest","dataset","processing","classList","contains","addEventListener","e","style","display","remove","$header","$backdrop","add","toggle","$projects","i","querySelectorAll","length","perLine","window","innerWidth","k","Math","ceil","$line","createElement","className","startRow","endtRow","gridRow","appendChild","height","scrollHeight","body","paddingBottom","forEach","el","bind","target","preventDefault"],"mappings":"yBAAA,SAASA,EAAUC,OAEXC,EAAQC,SAASC,eAAeH,GAAME,SAASC,eAAeH,GAAMI,KAAKC,QAAQ,UAEjFJ,EAAMK,QAAQC,YAA0C,GAA5BN,EAAMK,QAAQC,eACxCD,QAAQC,YAAa,EAEvBN,EAAMO,UAAUC,SAAS,gBACnBC,iBAAiB,gBAAkBC,MAC/BC,MAAMC,QAAU,SAChBP,QAAQC,YAAa,UAErB,MAEJC,UAAUM,OAAO,cAyH/BZ,SAASQ,iBAAiB,mBAAoB,KApGzB,YAEXK,EAAUb,SAASC,eAAe,UAClCa,EAAYd,SAASC,eAAe,mBAC1BD,SAASC,eAAe,iBAEhCO,iBAAiB,QAAS,KAC1BK,EAAQT,QAAQC,YAA4C,GAA9BQ,EAAQT,QAAQC,eAC1CD,QAAQC,YAAa,EACiB,GAA1CQ,EAAQP,UAAUC,SAAS,eACjBG,MAAMC,QAAU,mBACf,aACGL,UAAUS,IAAI,eAChBX,QAAQC,YAAa,GAC9B,OAEOG,iBAAiB,gBAAkBC,MAC/BC,MAAMC,QAAU,SAClBP,QAAQC,YAAa,UAEvB,MAEAC,UAAUM,OAAO,gBAEvBN,UAAUU,OAAO,mBAaV,YAEbC,EAAYjB,SAASC,eAAe,gBACrCgB,EAAW,aAEVC,EAAID,EAAUE,iBAAiB,YAAYC,WAC7CC,EAAU,UAEN,QACEC,OAAOC,WAAa,MACZ,aAERD,OAAOC,WAAa,OACZ,MAIb,IAAIC,EAAI,EAAGA,GAAKC,KAAKC,KAAKR,EAAEG,GAAUG,IAAK,OACtCG,EAAQ3B,SAAS4B,cAAc,SAC/BC,UAAY,sBACZC,EAAa,EAAFN,EACXO,EAAWD,EAAW,IACtBpB,MAAMsB,QAAUF,EAAW,IAAMC,IAC7BE,YAAYN,QAhCf,YAGLO,EADUlC,SAASC,eAAe,UACjBkC,sBAEdC,KAAK1B,MAAM2B,cAAgBH,EAAS,kBA4EpCf,iBAAiB,kBAAkBmB,QAASC,MAC9C/B,iBAAiB,QAASX,EAAU2C,KAAKD,eAGvCpB,iBAAiB,UAAUmB,QAASC,MACtC/B,iBAAiB,QAAS,SAASC,GAC9BA,EAAEgC,QAAUF,KACF9B,EAAEgC,OAAO3C,iBAKtBqB,iBAAiB,kBAAkBmB,QAASC,MAC9C/B,iBAAiB,QAAUC,MACxBiC,iBA3Id,SAAmB5C,OAEXC,EAAQC,SAASC,eAAeH,GAEhCC,EAAMK,QAAQC,YAA0C,GAA5BN,EAAMK,QAAQC,eACxCD,QAAQC,YAAa,EAEiB,GAAxCN,EAAMO,UAAUC,SAAS,gBACnBG,MAAMC,QAAU,kBACX,aACDL,UAAUS,IAAI,cACdX,QAAQC,YAAa,GAC5B,MAgIWkC,EAAGnC,QAAQqC,OAAQF,EAAGnC"}