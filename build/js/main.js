!function(){"use strict";const e=()=>{async function e(e,s,n=100){const a=e.split(""),i=s;let o=0;for(;o<a.length;)await t(n),i.innerHTML+=a[o],o++}async function s(e){const s=e,n=s.innerHTML.split("");for(;n.length>0;)await t(100),n.pop(),s.innerText=n.join("")}document.querySelectorAll(".js-typing-text").forEach(n=>{let a=[];a[0]={text:n.dataset.typingFirst},a[1]={text:n.dataset.typingSecond},async function(n,a){for(var i=1;;)await t(2e3),await s(a),await t(500),await e(n[i].text,a),await t(2e3),++i>=n.length&&(i=0)}(a,n),console.log(n.parentElement.offsetHeight),n.parentElement.style.height=n.parentElement.offsetHeight+"px"})};function t(e){return new Promise(t=>setTimeout(t,e))}function s(e){let t=document.getElementById(e)?document.getElementById(e):this.closest(".popup");t.dataset.processing&&1==t.dataset.processing||(t.dataset.processing=!0,t.classList.contains("is-shown")&&(t.addEventListener("transitionend",e=>{t.style.display="none",t.dataset.processing=!1},{once:!0}),t.classList.remove("is-shown")))}const n=()=>{let e=new ymaps.Map("yamap",{center:[59.929646,30.400804],zoom:16}),t=new ymaps.Placemark(e.getCenter(),{},{iconLayout:"default#image",iconImageHref:"./../images/map-marker.png",iconImageSize:[80,80],iconImageOffset:[-19,-19]});e.geoObjects.add(t)};document.addEventListener("DOMContentLoaded",()=>{(()=>{const e=document.getElementById("header"),t=document.getElementById("header-backdrop");document.getElementById("header-button").addEventListener("click",()=>{e.dataset.processing&&1==e.dataset.processing||(e.dataset.processing=!0,0==e.classList.contains("is-fixed")?(t.style.display="block",setTimeout(function(){t.classList.add("is-active"),e.dataset.processing=!1},1)):(t.addEventListener("transitionend",s=>{t.style.display="none",e.dataset.processing=!1},{once:!0}),t.classList.remove("is-active")),e.classList.toggle("is-fixed"))})})(),(()=>{const e=document.getElementById("projects");if(!e)return;const t=e.querySelectorAll(".project").length;let s=4;switch(!0){case window.innerWidth<767:s=1;break;case window.innerWidth<1280:s=2}for(let n=1;n<=Math.ceil(t/s);n++){const t=document.createElement("div");t.className="project__line";const s=2*n,a=s+1;t.style.gridRow=s+"/"+a,e.appendChild(t)}})(),(()=>{const e=document.getElementById("map-scroll");if(null===e)return;const t=e.querySelectorAll(".map__marker");let s,n;function a(){s=e.getBoundingClientRect(),(n=(s.height-s.y-s.height)/s.height*100)>0?t[0].classList.add("is-active"):t[0].classList.remove("is-active"),n>15?t[1].classList.add("is-active"):t[1].classList.remove("is-active"),n>30?t[2].classList.add("is-active"):t[2].classList.remove("is-active"),n>45?t[3].classList.add("is-active"):t[3].classList.remove("is-active")}new IntersectionObserver(function(e){e[0].isIntersecting?window.addEventListener("scroll",a):window.removeEventListener("scroll",a)}).observe(e)})(),e(),document.querySelectorAll(".js-accordion .btn").forEach(e=>{e.addEventListener("click",function(){e.classList.toggle("btn-plus"),e.classList.toggle("btn-minus"),e.classList.toggle("btn-light-blue"),e.classList.toggle("btn-blue"),e.closest(".accordion__item").classList.toggle("is-active")})}),(()=>{const e=document.getElementById("contact-form");e.querySelector(".js-submit").addEventListener("click",()=>{e.dataset.errors=0;const t=e.querySelector('input[name="phone"]'),s=e.querySelector('input[name="name"]'),n=e.querySelector('[name="message"]');0==t.value.length?(t.classList.add("is-error"),e.dataset.errors++):t.classList.remove("is-error"),0==s.value.length?(s.classList.add("is-error"),e.dataset.errors++):s.classList.remove("is-error"),0==n.value.length?(n.classList.add("is-error"),e.dataset.errors++):n.classList.remove("is-error"),e.dataset.errors>0||(new FormData(e),e.style.display="none",document.getElementById("contact-form-success").style.display="block")})})(),"undefined"!=typeof ymaps&&ymaps.ready(n),document.querySelectorAll(".js-popup-hide").forEach(e=>{e.addEventListener("click",s.bind(e))}),document.querySelectorAll(".popup").forEach(e=>{e.addEventListener("click",function(t){t.target==e&&s(t.target.id)})}),document.querySelectorAll(".js-popup-show").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),function(e){let t=document.getElementById(e);t.dataset.processing&&1==t.dataset.processing||(t.dataset.processing=!0,0==t.classList.contains("is-shown")&&(t.style.display="flex",setTimeout(function(){t.classList.add("is-shown"),t.dataset.processing=!1},1)))}(e.dataset.target,e.dataset)})})})}();
//# sourceMappingURL=main.js.map
